<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resolve | ANALYTICS - Professional AEC Auditor Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 overflow-hidden">

    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside class="w-64 bg-slate-900 flex flex-col shadow-xl z-20">
            <div class="p-6">
                <h1 class="text-xl font-black tracking-tighter text-white flex items-center">
                    RESOLVE <span class="ml-2 text-indigo-400 font-light tracking-widest text-xs uppercase border-l border-slate-700 pl-2">Analytics</span>
                </h1>
            </div>
            
            <nav class="flex-1 mt-4 space-y-1">
                <button onclick="switchTab('dashboard')" id="nav-dashboard" class="nav-item flex items-center w-full p-4 space-x-3 text-indigo-400 bg-slate-800 border-r-4 border-indigo-400 transition-all">
                    <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                    <span class="font-medium">Dashboard</span>
                </button>
                <button onclick="switchTab('qs')" id="nav-qs" class="nav-item flex items-center w-full p-4 space-x-3 text-slate-400 hover:bg-slate-800 hover:text-white transition-all">
                    <i data-lucide="coins" class="w-5 h-5"></i>
                    <span class="font-medium">QS / Unit Rate</span>
                </button>
                <button onclick="switchTab('qa')" id="nav-qa" class="nav-item flex items-center w-full p-4 space-x-3 text-slate-400 hover:bg-slate-800 hover:text-white transition-all">
                    <i data-lucide="clipboard-check" class="w-5 h-5"></i>
                    <span class="font-medium">Audit & Compliance</span>
                </button>
                <button onclick="switchTab('calc')" id="nav-calc" class="nav-item flex items-center w-full p-4 space-x-3 text-slate-400 hover:bg-slate-800 hover:text-white transition-all">
                    <i data-lucide="calculator" class="w-5 h-5"></i>
                    <span class="font-medium">Spec Calculator</span>
                </button>
            </nav>

            <div class="p-4 mt-auto border-t border-slate-800">
                <div class="flex items-center space-x-3 p-2">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-indigo-600 to-blue-400 flex items-center justify-center text-white font-bold text-xs shadow-lg">SA</div>
                    <div>
                        <p class="text-xs font-bold text-white">Lead Auditor</p>
                        <p class="text-[10px] text-slate-500 uppercase tracking-tighter font-semibold">Senior QS / QA</p>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="bg-white border-b border-slate-200 px-8 py-4 z-10 flex justify-between items-center shadow-sm">
                <div>
                    <h2 class="text-lg font-bold text-slate-800 uppercase tracking-tight">Metropolis Commercial Hub</h2>
                    <div class="flex items-center space-x-2">
                        <span class="inline-block w-2 h-2 rounded-full bg-emerald-500"></span>
                        <p class="text-xs text-slate-500 font-medium tracking-wide">Ref: PJ-2024-089 • BIM: Active (LOD 400)</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative hidden md:block">
                        <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"></i>
                        <input type="text" placeholder="Audit search..." class="pl-10 pr-4 py-2 bg-slate-100 border-none rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 w-64">
                    </div>
                </div>
            </header>

            <!-- Tab Viewports -->
            <div class="flex-1 overflow-y-auto custom-scrollbar p-8">
                
                <!-- DASHBOARD TAB -->
                <div id="tab-dashboard" class="tab-content active space-y-8 animate-in fade-in duration-500">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                            <p class="text-[10px] font-black uppercase text-slate-400 mb-1">Forecast Account</p>
                            <h3 id="dash-total" class="text-2xl font-black text-slate-800">$0.00</h3>
                            <div class="mt-2 flex items-center text-xs font-bold text-emerald-600">
                                <i data-lucide="trending-up" class="w-3.5 h-3.5 mr-1"></i> +2.4% vs Base
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                            <p class="text-[10px] font-black uppercase text-slate-400 mb-1">Spent to Date</p>
                            <h3 class="text-2xl font-black text-slate-800">$2.15M</h3>
                            <p class="text-xs text-slate-400 mt-2">43% of total budget</p>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                            <p class="text-[10px] font-black uppercase text-slate-400 mb-1">QA Pass Rate</p>
                            <h3 class="text-2xl font-black text-indigo-600">94.2%</h3>
                            <p class="text-xs text-slate-400 mt-2">Target: 95.0%</p>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                            <p class="text-[10px] font-black uppercase text-slate-400 mb-1">Variations Active</p>
                            <h3 class="text-2xl font-black text-amber-600">12</h3>
                            <p class="text-xs text-slate-400 mt-2">$84k pending approval</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-2xl border border-slate-200">
                            <h3 class="font-bold mb-6 flex items-center"><i data-lucide="bar-chart-3" class="mr-2 text-indigo-500 w-5 h-5"></i> Trade Cost Distribution</h3>
                            <div id="trade-distribution" class="space-y-6">
                                <!-- Generated via JS -->
                            </div>
                        </div>
                        <div class="bg-slate-900 p-8 rounded-2xl text-white relative overflow-hidden">
                            <div class="absolute top-0 right-0 p-4 opacity-10"><i data-lucide="hard-hat" class="w-32 h-32"></i></div>
                            <h3 class="font-bold mb-4 flex items-center text-amber-400 uppercase tracking-widest text-xs">
                                <i data-lucide="alert-triangle" class="mr-2 w-4 h-4"></i> Auditor's Risks & Insights
                            </h3>
                            <div class="space-y-4 relative z-10">
                                <div class="p-4 bg-white/5 border border-white/10 rounded-xl">
                                    <p class="text-xs font-bold text-indigo-300 mb-1">Material Volatility Alert</p>
                                    <p class="text-sm opacity-80 italic">"Global steel indices show a 12% rise. Current Unit Rate for Rebar ($980) may need adjustment in Q3."</p>
                                </div>
                                <div class="p-4 bg-white/5 border border-white/10 rounded-xl">
                                    <p class="text-xs font-bold text-emerald-400 mb-1">QA Productivity Sync</p>
                                    <p class="text-sm opacity-80 italic">"Batch 4 Concrete passed all 28-day strength tests. Retentions for Zone B can be processed."</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- QS / BOQ TAB -->
                <div id="tab-qs" class="tab-content space-y-6">
                    <!-- List View -->
                    <div id="qs-list-view" class="bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
                        <div class="p-6 border-b border-slate-100 flex justify-between items-center">
                            <div>
                                <h3 class="font-black text-slate-800 uppercase tracking-tighter">Bill of Quantities (BoQ)</h3>
                                <p class="text-xs text-slate-400 font-bold">Consolidated Measurement & Rates</p>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead class="bg-slate-50 text-[10px] font-black text-slate-400 uppercase tracking-widest border-b border-slate-100">
                                    <tr>
                                        <th class="px-6 py-4">Item Description</th>
                                        <th class="px-6 py-4 text-center">Unit</th>
                                        <th class="px-6 py-4 text-center">Quantity</th>
                                        <th class="px-6 py-4 text-center">Rate ($)</th>
                                        <th class="px-6 py-4 text-right">Amount ($)</th>
                                        <th class="px-6 py-4 text-center">Analysis</th>
                                    </tr>
                                </thead>
                                <tbody id="boq-body" class="divide-y divide-slate-100">
                                    <!-- Generated via JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- URA Detail View (Hidden by default) -->
                    <div id="qs-ura-view" class="hidden max-w-5xl mx-auto">
                        <button onclick="toggleBoQView('list')" class="flex items-center text-xs font-black uppercase tracking-widest text-slate-400 hover:text-indigo-600 mb-6 transition-colors">
                            <i data-lucide="arrow-left" class="mr-2 w-4 h-4"></i> Back to BoQ
                        </button>
                        <div id="ura-container" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <!-- Generated via JS -->
                        </div>
                    </div>
                </div>

                <!-- QA TAB -->
                <div id="tab-qa" class="tab-content space-y-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-black text-slate-800 uppercase tracking-tighter">Site Compliance & QA Registry</h3>
                        <div class="flex items-center space-x-2 bg-white px-4 py-2 rounded-xl border border-slate-200">
                          <div class="w-2 h-2 rounded-full bg-emerald-500"></div>
                          <span class="text-[10px] font-black uppercase text-slate-500">Live Audit Sync</span>
                        </div>
                    </div>
                    <div class="bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50 text-[10px] font-black text-slate-400 uppercase tracking-widest border-b border-slate-100">
                                <tr>
                                    <th class="px-6 py-4">Inspection Reference</th>
                                    <th class="px-6 py-4 text-center">Outcome</th>
                                    <th class="px-6 py-4 text-center">Auditor</th>
                                    <th class="px-6 py-4 text-center">Audit Date</th>
                                    <th class="px-6 py-4 text-right">Verification</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-4 font-bold text-slate-700">Foundation Reinforcement Compliance<p class="text-[9px] text-slate-400 font-bold uppercase mt-1">NCR-101</p></td>
                                    <td class="px-6 py-4 text-center"><span class="bg-emerald-100 text-emerald-700 px-2 py-1 rounded text-[10px] font-black">PASSED</span></td>
                                    <td class="px-6 py-4 text-center text-xs font-semibold text-slate-500">J. Smith</td>
                                    <td class="px-6 py-4 text-center text-xs text-slate-500">2024-05-12</td>
                                    <td class="px-6 py-4 text-right"><button class="text-[10px] font-black uppercase text-indigo-600 hover:underline">Download Cert</button></td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-4 font-bold text-slate-700">Concrete Slump Test Results<p class="text-[9px] text-slate-400 font-bold uppercase mt-1">NCR-102</p></td>
                                    <td class="px-6 py-4 text-center"><span class="bg-amber-100 text-amber-700 px-2 py-1 rounded text-[10px] font-black">WARNING</span></td>
                                    <td class="px-6 py-4 text-center text-xs font-semibold text-slate-500">A. Chen</td>
                                    <td class="px-6 py-4 text-center text-xs text-slate-500">2024-05-14</td>
                                    <td class="px-6 py-4 text-right"><button class="text-[10px] font-black uppercase text-indigo-600 hover:underline">Download Cert</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- CALC TAB -->
                <div id="tab-calc" class="tab-content max-w-4xl mx-auto">
                    <div class="bg-white p-8 rounded-3xl shadow-xl border border-slate-200">
                        <div class="flex items-center space-x-4 mb-10">
                            <div class="w-12 h-12 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-indigo-100">
                                <i data-lucide="calculator" class="w-6 h-6"></i>
                            </div>
                            <div>
                                <h3 class="text-2xl font-black text-slate-800 tracking-tight uppercase">Structural Measurement Engine</h3>
                                <p class="text-sm text-slate-500 font-medium">Calculations based on AS/NZS/ISO standard methods</p>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                            <div class="space-y-6">
                                <div>
                                    <label class="text-[10px] font-black uppercase text-slate-400 tracking-widest mb-3 block">Member Length (m)</label>
                                    <input type="number" id="calc-length" value="12" oninput="runCalculations()" class="w-full px-6 py-4 bg-slate-50 border border-slate-100 rounded-2xl focus:ring-2 focus:ring-indigo-500 outline-none text-xl font-black text-slate-700">
                                </div>
                                <div>
                                    <label class="text-[10px] font-black uppercase text-slate-400 tracking-widest mb-3 block">Member Width (m)</label>
                                    <input type="number" id="calc-width" value="8" oninput="runCalculations()" class="w-full px-6 py-4 bg-slate-50 border border-slate-100 rounded-2xl focus:ring-2 focus:ring-indigo-500 outline-none text-xl font-black text-slate-700">
                                </div>
                                <div>
                                    <label class="text-[10px] font-black uppercase text-slate-400 tracking-widest mb-3 block">Height / Depth (m)</label>
                                    <input type="number" id="calc-depth" value="0.4" oninput="runCalculations()" class="w-full px-6 py-4 bg-slate-50 border border-slate-100 rounded-2xl focus:ring-2 focus:ring-indigo-500 outline-none text-xl font-black text-slate-700">
                                </div>
                            </div>
                            <div class="bg-slate-900 rounded-3xl p-10 text-white flex flex-col items-center justify-center text-center relative overflow-hidden">
                                <p class="text-[10px] font-black uppercase tracking-[0.3em] text-indigo-400 mb-4">Net Measurement (SMM)</p>
                                <h4 id="calc-output-vol" class="text-7xl font-black mb-4">38.40</h4>
                                <p class="text-xl font-light opacity-50 uppercase tracking-widest mb-8">Cubic Meters</p>
                                <div class="w-full grid grid-cols-2 gap-4">
                                    <div class="p-4 bg-white/5 border border-white/10 rounded-2xl">
                                        <p class="text-[9px] font-bold text-slate-500 uppercase mb-1">Gross (+5% Waste)</p>
                                        <p id="calc-output-gross" class="text-lg font-black text-emerald-400">40.32</p>
                                    </div>
                                    <div class="p-4 bg-white/5 border border-white/10 rounded-2xl">
                                        <p class="text-[9px] font-bold text-slate-500 uppercase mb-1">Est. Cost (Live)</p>
                                        <p id="calc-output-cost" class="text-lg font-black text-amber-400">$7,123</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <script>
        // --- DATA ---
        let lineItems = [
            { 
                id: 1, 
                desc: 'Substructure Concrete (Grade 35)', 
                unit: 'm³', 
                qty: 450, 
                rate: 185.50, 
                category: 'Structural',
                breakdown: {
                    material: [
                        { item: 'Ready-mix Concrete G35', qty: 1.05, rate: 120, total: 126 },
                        { item: 'Curing Compound', qty: 0.1, rate: 15, total: 1.5 }
                    ],
                    labor: [
                        { role: 'Concretor', hours: 1.5, rate: 22, total: 33 },
                        { role: 'General Labor', hours: 0.5, rate: 18, total: 9 }
                    ],
                    plant: [
                        { item: 'Concrete Pump (Shared)', hours: 0.2, rate: 50, total: 10 },
                        { item: 'Vibrator/Tools', hours: 1, rate: 6, total: 6 }
                    ],
                    markup: 15
                }
            },
            { 
                id: 2, 
                desc: 'High Tensile Steel Reinforcement', 
                unit: 'Ton', 
                qty: 120, 
                rate: 980.00, 
                category: 'Structural',
                breakdown: {
                    material: [{ item: 'D20/D16 Steel Bars', qty: 1.03, rate: 820, total: 844.6 }],
                    labor: [{ role: 'Steel Fixer', hours: 8, rate: 25, total: 200 }],
                    plant: [{ item: 'Bar Bender/Cutter', hours: 2, rate: 15, total: 30 }],
                    markup: 10
                }
            },
            { id: 3, desc: 'Internal Masonry Works', unit: 'm²', qty: 2200, rate: 45, category: 'Architectural' },
            { id: 4, desc: 'MEP First Fix - Electrical', unit: 'Item', qty: 1, rate: 125000, category: 'MEP' },
        ];

        // --- CORE LOGIC ---
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(i => i.className = 'nav-item flex items-center w-full p-4 space-x-3 text-slate-400 hover:bg-slate-800 hover:text-white transition-all');
            
            document.getElementById(`tab-${tabId}`).classList.add('active');
            const navBtn = document.getElementById(`nav-${tabId}`);
            navBtn.className = 'nav-item flex items-center w-full p-4 space-x-3 text-indigo-400 bg-slate-800 border-r-4 border-indigo-400 transition-all';
            
            if (tabId === 'qs') renderBoQ();
            if (tabId === 'dashboard') updateDashboard();
        }

        function updateDashboard() {
            const total = lineItems.reduce((acc, item) => acc + (item.qty * item.rate), 0);
            document.getElementById('dash-total').innerText = `$${(total / 1000000).toFixed(2)}M`;
            
            const distContainer = document.getElementById('trade-distribution');
            distContainer.innerHTML = lineItems.map(item => `
                <div>
                    <div class="flex justify-between text-xs mb-2">
                        <span class="font-bold text-slate-600">${item.desc}</span>
                        <span class="font-black text-slate-900">$${(item.qty * item.rate).toLocaleString()}</span>
                    </div>
                    <div class="h-2 w-full bg-slate-100 rounded-full overflow-hidden">
                        <div class="h-full bg-indigo-500 rounded-full" style="width: ${Math.min((item.qty * item.rate) / 200000 * 100, 100)}%"></div>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function renderBoQ() {
            const body = document.getElementById('boq-body');
            body.innerHTML = lineItems.map(item => `
                <tr class="hover:bg-indigo-50/30 transition-colors group">
                    <td class="px-6 py-4">
                        <span class="block font-bold text-slate-700 text-sm">${item.desc}</span>
                        <span class="text-[10px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded font-black uppercase mt-1 inline-block">${item.category}</span>
                    </td>
                    <td class="px-6 py-4 text-center text-xs font-bold text-slate-500">${item.unit}</td>
                    <td class="px-6 py-4 text-center">
                        <input type="number" value="${item.qty}" onchange="updateQty(${item.id}, this.value)" class="w-20 text-center bg-transparent border-none focus:ring-1 focus:ring-indigo-300 rounded font-bold text-slate-700">
                    </td>
                    <td class="px-6 py-4 text-center font-bold text-slate-700">$${item.rate.toFixed(2)}</td>
                    <td class="px-6 py-4 text-right font-black text-indigo-600">$${(item.qty * item.rate).toLocaleString()}</td>
                    <td class="px-6 py-4 text-center">
                        ${item.breakdown ? `
                            <button onclick="viewURA(${item.id})" class="p-2 hover:bg-white rounded-lg text-indigo-600 shadow-sm border border-transparent hover:border-indigo-100 transition-all">
                                <i data-lucide="chevron-right" class="w-5 h-5"></i>
                            </button>
                        ` : '<i data-lucide="info" class="w-4 h-4 text-slate-300 mx-auto"></i>'}
                    </td>
                </tr>
            `).join('');
            lucide.createIcons();
        }

        function updateQty(id, val) {
            const item = lineItems.find(i => i.id === id);
            if (item) item.qty = parseFloat(val) || 0;
            renderBoQ();
        }

        function toggleBoQView(mode) {
            document.getElementById('qs-list-view').classList.toggle('hidden', mode === 'ura');
            document.getElementById('qs-ura-view').classList.toggle('hidden', mode === 'list');
        }

        function viewURA(id) {
            const item = lineItems.find(i => i.id === id);
            const container = document.getElementById('ura-container');
            
            const renderSection = (title, icon, rows) => `
                <div class="bg-white rounded-xl border border-slate-200 overflow-hidden mb-4">
                    <div class="bg-slate-50 px-4 py-2 border-b border-slate-200 flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <i data-lucide="${icon}" class="w-4 h-4 text-slate-500"></i>
                            <h4 class="text-xs font-black uppercase text-slate-600 tracking-wider">${title}</h4>
                        </div>
                    </div>
                    <div>
                        ${rows.map(r => `
                            <div class="flex justify-between items-center px-4 py-3 border-b border-slate-100 last:border-0 hover:bg-slate-50/50">
                                <div>
                                    <p class="text-sm font-bold text-slate-700">${r.item || r.role}</p>
                                    <p class="text-[10px] text-slate-400">Qty: ${r.qty || r.hours} × $${r.rate}</p>
                                </div>
                                <span class="text-sm font-black text-slate-800">$${r.total.toFixed(2)}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            container.innerHTML = `
                <div class="lg:col-span-2">
                    <div class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm mb-6">
                        <div class="flex justify-between items-start mb-6">
                            <div>
                                <h3 class="text-xl font-black text-slate-800 uppercase tracking-tighter">Unit Rate Analysis (URA)</h3>
                                <p class="text-sm font-bold text-indigo-600">${item.desc}</p>
                            </div>
                            <div class="text-right">
                                <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Base Rate</p>
                                <p class="text-2xl font-black text-slate-900">$${item.rate.toFixed(2)} / ${item.unit}</p>
                            </div>
                        </div>
                        ${renderSection('Material Components', 'package', item.breakdown.material)}
                        ${renderSection('Labor & Man-Hours', 'users', item.breakdown.labor)}
                        ${renderSection('Plant & Equipment', 'factory', item.breakdown.plant)}
                        <div class="bg-indigo-900 rounded-xl p-6 text-white flex justify-between items-center mt-6">
                            <div><p class="text-[10px] uppercase opacity-60">Subtotal</p><h4 class="text-xl font-black">$194.50</h4></div>
                            <div class="text-center"><p class="text-[10px] uppercase opacity-60">Markup</p><div class="flex items-center bg-white/10 px-3 py-1 rounded-lg mt-1 font-black"><i data-lucide="percent" class="w-3 h-3 mr-1"></i>15%</div></div>
                            <div class="text-right"><p class="text-[10px] uppercase opacity-60">Final Audit Rate</p><h4 class="text-3xl font-black text-amber-400">$${item.rate.toFixed(2)}</h4></div>
                        </div>
                    </div>
                </div>
                <div class="space-y-6">
                    <div class="bg-slate-900 p-6 rounded-2xl text-white">
                        <h4 class="text-xs font-black uppercase text-indigo-400 tracking-widest mb-4">Sensitivity Analysis</h4>
                        <div class="space-y-4">
                            <div class="p-3 bg-white/5 rounded-xl border border-white/10">
                                <label class="block text-[10px] text-slate-400 mb-1 font-bold">Fuel Index Variance (%)</label>
                                <input type="range" class="w-full accent-indigo-500">
                            </div>
                            <div class="p-3 bg-white/5 rounded-xl border border-white/10">
                                <label class="block text-[10px] text-slate-400 mb-1 font-bold">Waste Factor (%)</label>
                                <input type="number" value="5" class="bg-transparent border-none text-xl font-black w-full text-emerald-400 outline-none">
                            </div>
                        </div>
                        <button class="w-full mt-6 bg-indigo-600 py-3 rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-500 transition-all">Apply Adjustments</button>
                    </div>
                </div>
            `;
            toggleBoQView('ura');
            lucide.createIcons();
        }

        function runCalculations() {
            const l = parseFloat(document.getElementById('calc-length').value) || 0;
            const w = parseFloat(document.getElementById('calc-width').value) || 0;
            const d = parseFloat(document.getElementById('calc-depth').value) || 0;
            
            const vol = l * w * d;
            const gross = vol * 1.05;
            const cost = vol * 185.50;

            document.getElementById('calc-output-vol').innerText = vol.toFixed(2);
            document.getElementById('calc-output-gross').innerText = gross.toFixed(2);
            document.getElementById('calc-output-cost').innerText = `$${Math.round(cost).toLocaleString()}`;
        }

        // Initialize
        window.onload = () => {
            updateDashboard();
            runCalculations();
            lucide.createIcons();
        }
    </script>
</body>
</html>
